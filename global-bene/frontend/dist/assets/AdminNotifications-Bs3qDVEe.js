import{j as e}from"./ui-BaUVVAjf.js";import{r as a}from"./router-DiqerDgP.js";import{a as x}from"./authService-BKeytffR.js";import"./vendor-Bzgz95E1.js";import"./index-DDEPdpRf.js";const S=()=>{const[g,d]=a.useState([]),[c,h]=a.useState(""),[t,u]=a.useState("admin_message"),[r,n]=a.useState(""),[l,i]=a.useState(!1),[o,m]=a.useState("");a.useEffect(()=>{o.length>2?f():d([])},[o]);const f=async()=>{try{const s=await x.searchUsers(o);d(s.data.users.slice(0,10))}catch(s){console.error("User search error:",s)}},j=async()=>{if(!c||!r.trim()){alert("Please select a user and enter a message");return}i(!0);try{await x.admin.sendNotificationToUser(c,{type:t,message:r.trim()}),alert("Notification sent successfully!"),n(""),h(""),m("")}catch(s){alert("Failed to send notification"),console.error("Send notification error:",s)}finally{i(!1)}},p=async()=>{if(!r.trim()){alert("Please enter a message");return}if(window.confirm("Are you sure you want to send this notification to ALL users?")){i(!0);try{const s=await x.admin.sendNotificationToAll({type:t,message:r.trim()});alert(`Notification sent to ${s.data.message.match(/\d+/)[0]} users!`),n("")}catch(s){alert("Failed to send notifications"),console.error("Send to all error:",s)}finally{i(!1)}}};return e.jsxs("div",{className:"max-w-4xl mx-auto p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Send Notifications"}),e.jsx("button",{onClick:()=>window.history.back(),className:"px-4 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600",children:"Back to Dashboard"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Send to Specific User"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Search User"}),e.jsx("input",{type:"text",value:o,onChange:s=>m(s.target.value),placeholder:"Type username or email",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-orange-500 focus:border-orange-500"}),g.length>0&&e.jsx("div",{className:"mt-2 max-h-40 overflow-y-auto border border-gray-200 rounded-lg",children:g.map(s=>e.jsxs("div",{onClick:()=>{h(s._id),m(s.username),d([])},className:"px-3 py-2 hover:bg-gray-50 cursor-pointer border-b border-gray-100 last:border-b-0",children:[e.jsx("div",{className:"font-medium",children:s.username}),e.jsx("div",{className:"text-sm text-gray-500",children:s.email})]},s._id))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Notification Type"}),e.jsxs("select",{value:t,onChange:s=>u(s.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-orange-500 focus:border-orange-500",children:[e.jsx("option",{value:"admin_message",children:"Admin Message"}),e.jsx("option",{value:"announcement",children:"Announcement"}),e.jsx("option",{value:"warning",children:"Warning"}),e.jsx("option",{value:"info",children:"Information"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Message"}),e.jsx("textarea",{value:r,onChange:s=>n(s.target.value),placeholder:"Enter your message here...",rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-orange-500 focus:border-orange-500"})]}),e.jsx("button",{onClick:j,disabled:l||!c||!r.trim(),className:"w-full bg-orange-500 text-white py-2 px-4 rounded-lg hover:bg-orange-600 disabled:opacity-50 disabled:cursor-not-allowed",children:l?"Sending...":"Send to User"})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Send to All Users"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Notification Type"}),e.jsxs("select",{value:t,onChange:s=>u(s.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-orange-500 focus:border-orange-500",children:[e.jsx("option",{value:"announcement",children:"Platform Announcement"}),e.jsx("option",{value:"maintenance",children:"Maintenance Notice"}),e.jsx("option",{value:"update",children:"Feature Update"}),e.jsx("option",{value:"warning",children:"Important Warning"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Message"}),e.jsx("textarea",{value:r,onChange:s=>n(s.target.value),placeholder:"Enter your message to all users...",rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-orange-500 focus:border-orange-500"})]}),e.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:e.jsx("div",{className:"flex",children:e.jsx("div",{className:"ml-3",children:e.jsxs("p",{className:"text-sm text-yellow-800",children:[e.jsx("strong",{children:"Warning:"})," This will send the notification to ALL registered users. Use this feature carefully."]})})})}),e.jsx("button",{onClick:p,disabled:l||!r.trim(),className:"w-full bg-red-500 text-white py-2 px-4 rounded-lg hover:bg-red-600 disabled:opacity-50 disabled:cursor-not-allowed",children:l?"Sending...":"Send to All Users"})]})]})]}),e.jsxs("div",{className:"mt-8 bg-white rounded-lg shadow p-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Notification Types Guide"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-gray-900 mb-2",children:"Individual Messages:"}),e.jsxs("ul",{className:"text-sm text-gray-600 space-y-1",children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Admin Message:"})," Direct communication from admin"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Announcement:"})," Important updates or news"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Warning:"})," Policy violations or issues"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Info:"})," General information"]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-gray-900 mb-2",children:"Broadcast Messages:"}),e.jsxs("ul",{className:"text-sm text-gray-600 space-y-1",children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Platform Announcement:"})," Major updates"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Maintenance Notice:"})," System downtime"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Feature Update:"})," New features released"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Important Warning:"})," Critical alerts"]})]})]})]})]})]})};export{S as default};
